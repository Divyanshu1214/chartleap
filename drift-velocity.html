<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Drift Velocity Simulation - Electron Motion in Conductor | chartleap</title>
    <link rel="canonical" href="https://www.chartleap.online/drift-velocity.html" />

    <meta name="description" content="Dekhein ki electric field apply karne par conductor ke andar electrons kaise drift karte hain. Temperature aur voltage ka electron motion par asar samjhein.">
    <meta name="keywords" content="drift velocity 3d simulation, electron motion in conductor, physics current electricity simulation, random motion vs drift">
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: sans-serif; }
        
        #ui-container {
            position: absolute; top: 10px; left: 10px;
            color: #fff; background: rgba(0, 0, 0, 0.75);
            padding: 15px; border-radius: 8px; width: 240px;
        }

        h2 { margin: 0 0 10px 0; font-size: 1.1rem; color: #00ffff; }
        label { display: block; font-size: 0.85rem; margin-bottom: 5px; color: #aaa; }
        
        input[type=range] { width: 100%; margin-bottom: 10px; accent-color: #00ffff; }
        
        button {
            width: 100%; padding: 10px; background: #00ffff;
            border: none; border-radius: 5px; font-weight: bold; cursor: pointer;
            transition: 0.2s; margin-top: 5px;
        }
        button.active { background: #ff4444; color: white; }
        
        #status { margin-top: 10px; color: #0f0; font-family: monospace; }
        
        #legend {
            position: absolute; top: 10px; right: 10px;
            color: #fff; background: rgba(0, 0, 0, 0.75);
            padding: 15px; border-radius: 8px; width: 180px; font-size: 0.9rem;
        }
        .legend-item { display: flex; align-items: center; margin-bottom: 5px; }
        .dot { width: 10px; height: 10px; border-radius: 50%; margin-right: 8px; }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>

    <div id="ui-container">
        <h2>3D Drift Controls</h2>
        <label>Electric Field (Voltage)</label>
        <input type="range" id="fieldSlider" min="0" max="100" value="0">
        
        <label>Temperature</label>
        <input type="range" id="tempSlider" min="1" max="10" value="5">
        
        <button id="toggleBtn">Apply Electric Field</button>
        <div id="status">Status: Random Motion</div>
    </div>

    <div id="legend">
        <h2>संकेत (Legend)</h2>
        <div class="legend-item"><span class="dot" style="background: #00ffff;"></span> मुक्त इलेक्ट्रॉन (e-)</div>
        <div class="legend-item"><span class="dot" style="background: #888;"></span> स्थिर परमाणु (+)</div>
        <div class="legend-item"><span class="dot" style="background: transparent; border: 1px solid #4444ff;"></span> कंडक्टर की सीमा</div>
        <div class="legend-item" style="color: yellow;">➡ विद्युत क्षेत्र (E-Field)</div>
    </div>

    <script>
        // --- Configuration ---
        const BOX_W = 50, BOX_H = 15, BOX_D = 15;
        const NUM_ELECTRONS = 120;
        const SCATTERING_FACTOR = 0.005;

        // --- State Variables ---
        let isFieldActive = false;
        let fieldStrength = 0;
        let temperature = 5;
        let electrons = [];
        
        // --- Three.js Setup ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 15, 35);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        
        scene.add(new THREE.AmbientLight(0x404040));
        const pLight = new THREE.PointLight(0xffffff, 1, 100);
        pLight.position.set(10, 20, 10);
        scene.add(pLight);

        // --- Core Classes ---

        class Electron3D {
            constructor() {
                this.mesh = new THREE.Mesh(
                    new THREE.SphereGeometry(0.3, 8, 8), 
                    new THREE.MeshBasicMaterial({ color: 0x00ffff })
                );
                this.mesh.position.set( (Math.random()-0.5)*BOX_W, (Math.random()-0.5)*BOX_H, (Math.random()-0.5)*BOX_D );
                scene.add(this.mesh);
                this.velocity = new THREE.Vector3();
                this.randomizeVelocity(5);
            }

            randomizeVelocity(temp) {
                this.velocity.set(Math.random()-0.5, Math.random()-0.5, Math.random()-0.5)
                    .normalize().multiplyScalar(temp * 0.1);
            }
        }

        // --- Object Initialization ---
        
        const wireframe = new THREE.LineSegments(
            new THREE.WireframeGeometry(new THREE.BoxGeometry(BOX_W, BOX_H, BOX_D)),
            new THREE.LineBasicMaterial({ color: 0x4444ff, transparent: true, opacity: 0.3 })
        );
        scene.add(wireframe);

        const atomMat = new THREE.MeshStandardMaterial({ color: 0x888888, roughness: 0.4, metalness: 0.6 });
        for (let x = -BOX_W/2 + 3; x < BOX_W/2; x += 5) {
            for (let y = -BOX_H/2 + 3; y < BOX_H/2; y += 5) {
                for (let z = -BOX_D/2 + 3; z < BOX_D/2; z += 5) {
                    const atom = new THREE.Mesh(new THREE.SphereGeometry(0.7, 16, 16), atomMat);
                    atom.position.set(x, y, z);
                    scene.add(atom);
                }
            }
        }

        for(let i=0; i<NUM_ELECTRONS; i++) {
            electrons.push(new Electron3D());
        }

        const arrowHelper = new THREE.ArrowHelper(
            new THREE.Vector3(1, 0, 0), new THREE.Vector3(0, BOX_H/2 + 4, 0), 15, 0xffff00, 3, 2
        );
        arrowHelper.visible = false;
        scene.add(arrowHelper);


        // --- Physics Update Loop ---

        function updatePhysics() {
            electrons.forEach(e => {
                // 1. Electric Field Force (Drift opposite to E-Field, so -X direction)
                if (isFieldActive && fieldStrength > 0) {
                    e.velocity.x -= (fieldStrength * 0.0005); 
                }
                
                // 2. Move
                e.mesh.position.add(e.velocity);

                // 3. Boundary Collisions 

                // *** NEW: X-Axis Wrap Around (Periodic Boundary) ***
                // If electron goes out the front (+X), bring it to the back (-X)
                if (e.mesh.position.x > BOX_W/2) { 
                    e.mesh.position.x = -BOX_W/2; 
                }
                // If electron goes out the back (-X), bring it to the front (+X)
                if (e.mesh.position.x < -BOX_W/2) { 
                    e.mesh.position.x = BOX_W/2; 
                }


                // *** Y & Z Axis Bouncing (Bounded) ***
                // Y-Axis
                if (Math.abs(e.mesh.position.y) > BOX_H/2) { e.velocity.y *= -1; e.mesh.position.y = e.mesh.position.y > 0 ? BOX_H/2 : -BOX_H/2; }
                // Z-Axis
                if (Math.abs(e.mesh.position.z) > BOX_D/2) { e.velocity.z *= -1; e.mesh.position.z = e.mesh.position.z > 0 ? BOX_D/2 : -BOX_D/2; }

                // 4. Scattering
                if (Math.random() < (SCATTERING_FACTOR * temperature)) {
                    const speed = e.velocity.length();
                    e.velocity.set(Math.random()-0.5, Math.random()-0.5, Math.random()-0.5)
                        .normalize().multiplyScalar(speed * 0.95);
                }
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            updatePhysics();
            controls.update();
            renderer.render(scene, camera);
        }

        // --- UI and Event Handlers ---
        const btn = document.getElementById('toggleBtn');
        const fSlider = document.getElementById('fieldSlider');
        const tSlider = document.getElementById('tempSlider');
        const statusDiv = document.getElementById('status');

        btn.addEventListener('click', () => {
            isFieldActive = !isFieldActive;
            arrowHelper.visible = isFieldActive;
            
            if(isFieldActive) {
                btn.innerText = "Remove Electric Field";
                btn.classList.add('active');
                statusDiv.innerText = "Status: Drifting";
                statusDiv.style.color = "#ff4444";
                if(fSlider.value == 0) { fSlider.value = 50; fieldStrength = 50; }
            } else {
                btn.innerText = "Apply Electric Field";
                btn.classList.remove('active');
                statusDiv.innerText = "Status: Random Motion";
                statusDiv.style.color = "#0f0";
            }
        });

        fSlider.addEventListener('input', (e) => {
            fieldStrength = e.target.value;
            if(fieldStrength > 0 && !isFieldActive) btn.click();
        });

        tSlider.addEventListener('input', (e) => {
            temperature = e.target.value;
            electrons.forEach(el => el.randomizeVelocity(temperature));
        });

        animate();
    </script>
</body>
</html>